{"ast":null,"code":"import _objectSpread from\"C:/Users/Sohail/Desktop/HCL CREATION/cricket-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState,useEffect}from'react';import PlayerForm from'../components/PlayerForm';import PlayerTable from'../components/PlayerTable';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AddPlayerPage(){const[players,setPlayers]=useState([]);const[formData,setFormData]=useState({name:'',season:'',innings:0,notOuts:0,runs:0,ballsFaced:0,wickets:0,runsGiven:0,overs:0});const[failedAttempts,setFailedAttempts]=useState(0);const[isLocked,setIsLocked]=useState(false);const handleChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleSubmit=async e=>{e.preventDefault();if(isLocked){alert(\"Too many failed attempts. Please wait 2 minutes.\");return;}const input=prompt(\"Enter admin password to add player:\");if(!input)return;try{const parsedData=_objectSpread(_objectSpread({},formData),{},{innings:parseInt(formData.innings),notOuts:parseInt(formData.notOuts),runs:parseInt(formData.runs),ballsFaced:parseInt(formData.ballsFaced),wickets:parseInt(formData.wickets),runsGiven:parseInt(formData.runsGiven),overs:parseFloat(formData.overs)});const response=await fetch('http://localhost:5000/players/add',{method:'POST',headers:{'Content-Type':'application/json','x-admin-password':input},body:JSON.stringify(parsedData)});if(response.ok){const{player:newPlayer}=await response.json();setPlayers([...players,newPlayer]);setFormData({name:'',season:'',innings:0,notOuts:0,runs:0,ballsFaced:0,wickets:0,runsGiven:0,overs:0});setFailedAttempts(0);}else{const attempts=failedAttempts+1;setFailedAttempts(attempts);alert(\"Incorrect password. Attempt \".concat(attempts,\"/5\"));if(attempts>=5){setIsLocked(true);alert(\"Too many attempts. Locked for 2 minutes.\");setTimeout(()=>{setIsLocked(false);setFailedAttempts(0);},120000);}}}catch(error){console.error('Error:',error);}};useEffect(()=>{const fetchPlayers=async()=>{try{const response=await fetch('http://localhost:5000/players');if(response.ok){const data=await response.json();setPlayers(data);}else{console.error('Failed to fetch players');}}catch(error){console.error('Error fetching players:',error);}};fetchPlayers();},[]);return/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'4rem'},children:[/*#__PURE__*/_jsx(PlayerForm,{formData:formData,handleChange:handleChange,handleSubmit:handleSubmit}),/*#__PURE__*/_jsx(PlayerTable,{players:players,setPlayers:setPlayers})]});}export default AddPlayerPage;","map":{"version":3,"names":["useState","useEffect","PlayerForm","PlayerTable","jsx","_jsx","jsxs","_jsxs","AddPlayerPage","players","setPlayers","formData","setFormData","name","season","innings","notOuts","runs","ballsFaced","wickets","runsGiven","overs","failedAttempts","setFailedAttempts","isLocked","setIsLocked","handleChange","e","value","target","prev","_objectSpread","handleSubmit","preventDefault","alert","input","prompt","parsedData","parseInt","parseFloat","response","fetch","method","headers","body","JSON","stringify","ok","player","newPlayer","json","attempts","concat","setTimeout","error","console","fetchPlayers","data","style","marginTop","children"],"sources":["C:/Users/Sohail/Desktop/HCL CREATION/cricket-app/src/pages/AddPlayerPage.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport PlayerForm from '../components/PlayerForm';\nimport PlayerTable from '../components/PlayerTable';\n\nfunction AddPlayerPage() {\n    const [players, setPlayers] = useState([]);\n    const [formData, setFormData] = useState({\n        name: '',\n        season: '',\n        innings: 0,\n        notOuts: 0,\n        runs: 0,\n        ballsFaced: 0,\n        wickets: 0,\n        runsGiven: 0,\n        overs: 0\n    });\n\n    const [failedAttempts, setFailedAttempts] = useState(0);\n    const [isLocked, setIsLocked] = useState(false);\n\n    const handleChange = (e) => {\n        const { name, value } = e.target;\n        setFormData(prev => ({\n            ...prev,\n            [name]: value\n        }));\n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n\n        if (isLocked) {\n            alert(\"Too many failed attempts. Please wait 2 minutes.\");\n            return;\n        }\n\n        const input = prompt(\"Enter admin password to add player:\");\n\n        if (!input) return;\n\n        try {\n            const parsedData = {\n                ...formData,\n                innings: parseInt(formData.innings),\n                notOuts: parseInt(formData.notOuts),\n                runs: parseInt(formData.runs),\n                ballsFaced: parseInt(formData.ballsFaced),\n                wickets: parseInt(formData.wickets),\n                runsGiven: parseInt(formData.runsGiven),\n                overs: parseFloat(formData.overs)\n            };\n\n            const response = await fetch('http://localhost:5000/players/add', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'x-admin-password': input\n                },\n                body: JSON.stringify(parsedData)\n            });\n\n            if (response.ok) {\n                const { player: newPlayer } = await response.json();\n                setPlayers([...players, newPlayer]);\n\n                setFormData({\n                    name: '',\n                    season: '',\n                    innings: 0,\n                    notOuts: 0,\n                    runs: 0,\n                    ballsFaced: 0,\n                    wickets: 0,\n                    runsGiven: 0,\n                    overs: 0\n                });\n                setFailedAttempts(0);\n            } else {\n                const attempts = failedAttempts + 1;\n                setFailedAttempts(attempts);\n                alert(`Incorrect password. Attempt ${attempts}/5`);\n\n                if (attempts >= 5) {\n                    setIsLocked(true);\n                    alert(\"Too many attempts. Locked for 2 minutes.\");\n                    setTimeout(() => {\n                        setIsLocked(false);\n                        setFailedAttempts(0);\n                    }, 120000);\n                }\n            }\n        } catch (error) {\n            console.error('Error:', error);\n        }\n    };\n\n    useEffect(() => {\n        const fetchPlayers = async () => {\n            try {\n                const response = await fetch('http://localhost:5000/players');\n                if (response.ok) {\n                    const data = await response.json();\n                    setPlayers(data);\n                } else {\n                    console.error('Failed to fetch players');\n                }\n            } catch (error) {\n                console.error('Error fetching players:', error);\n            }\n        };\n\n        fetchPlayers();\n    }, []);\n\n    return (\n        <div style={{ marginTop: '4rem' }}>\n            <PlayerForm\n                formData={formData}\n                handleChange={handleChange}\n                handleSubmit={handleSubmit}\n            />\n            <PlayerTable players={players} setPlayers={setPlayers} />\n        </div>\n    );\n}\n\nexport default AddPlayerPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}